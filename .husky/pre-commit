#!/usr/bin/env sh

# Prevent commits to main branch
echo "ğŸ” Checking branch..."
current_branch=$(git rev-parse --abbrev-ref HEAD)

# Handle detached HEAD state
if [ "$current_branch" = "HEAD" ]; then
  echo "âš ï¸  You are in a detached HEAD state. Branch protection not applied."
else
  # Check if committing to protected branches
  if [ "$current_branch" = "main" ] || [ "$current_branch" = "master" ]; then
    echo "âŒ Direct commits to $current_branch branch are not allowed!"
    echo "Please create a feature branch and submit a pull request."
    exit 1
  fi
  echo "âœ… Committing to branch: $current_branch"
fi

echo "âœ… Pre-commit checks passed!"
